;(function(h,f){"function"===typeof define&&define.amd?define(f):h.Scrollbar=f()})(this,function(){function h(a,b){if(!(this instanceof h))return new h(a,b);if(!this.el){this.el=a;this.opts=l({},n,b||{});this._setupElements();var d=document.createElement("div"),c=document.createElement("div");d.style.position="absolute";d.style.top="-50px";d.style.height="50px";d.style.overflow="scroll";d.appendChild(c);document.body.appendChild(d);c=d.offsetWidth-c.offsetWidth;document.body.removeChild(d);(this.scrollbarWidth=
c)?(this._enableTrack(),this._observeHover(this.area),this._observeHover(this.track),this._enableScroll(),this._enableDragging(),this.refresh()):this._allowNativeScroll();return this}}function f(a,b){return function(){a.apply(b,arguments)}}function l(){var a;for(a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}function p(a,b,d){a.addEventListener?a.addEventListener(b,d):a.attachEvent("on"+b,d)}function m(a,b,
d){a.removeEventListener?a.removeEventListener(b,d):a.detachEvent("on"+b,d)}function k(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function g(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}var n={elements:{area:".scrollbar-area",wrapper:".scrollbar-wrapper",track:".scrollbar-track",handle:".scrollbar-handle"},stateClasses:{dragging:"scrollbar-dragging",hover:"scrollbar-hover"}};l(h.prototype,{destroy:function(){var a=
this.opts.stateClasses;this._removeAllListeners();this.wrapper.style.overflowY="";this.wrapper.style.marginRight="";this.track.style.display="";g(document.body,a.dragging);g(this.area,a.dragging);g(this.area,a.hover);g(this.track,a.hover);delete this.el},refresh:function(){var a;this.el&&this.scrollbarWidth&&(this.wrapper.scrollHeight>this.wrapper.offsetHeight?(this.track.style.display="block",a=this.track.offsetHeight/this.wrapper.scrollHeight,a!==this.ratio&&(this.ratio=a,this._resizeHandle(),this._positionHandle())):
this.track.style.display="none")},_setupElements:function(){var a=this.opts.elements;this.area=this.el.querySelector(a.area);this.wrapper=this.el.querySelector(a.wrapper);this.handle=this.el.querySelector(a.handle);this.track=this.el.querySelector(a.track)},_observeHover:function(a){var b=this.opts.stateClasses.hover;this._addListener(a,"mouseenter",function(){k(a,b)});this._addListener(a,"mouseleave",function(){g(a,b)})},_enableScroll:function(){this._addListener(this.wrapper,"scroll",f(this._positionHandle,
this))},_enableDragging:function(){var a=this.opts.stateClasses.dragging,b=null,d=null,c,e;this._addListener(this.handle,"mousedown",f(function(a){b=this.wrapper.scrollTop;d=a.clientY;this._addListener(document,"mousemove",c);this._addListener(document,"mouseup",e)},this));c=f(function(c){var e,f;null!==d&&(c=Math.round(b+(c.clientY-d)/this.ratio),e=this.wrapper.offsetHeight,f=this.wrapper.scrollHeight,c+e>f&&(c=f-e),this.wrapper.scrollTop=c,this._positionHandle(),k(document.body,a),k(this.area,a))},
this);e=f(function(){b=d=null;g(document.body,a);g(this.area,a);this._removeListener(document,"mousemove",c);this._removeListener(document,"mouseup",e)},this)},_enableTrack:function(){this.wrapper.style.overflowY="scroll";this.wrapper.style.marginRight=-1*this.scrollbarWidth+"px"},_allowNativeScroll:function(){this.wrapper.style.overflowY="auto"},_resizeHandle:function(){this.handle.style.height=Math.ceil(this.ratio*this.track.offsetHeight)+"px"},_positionHandle:function(){var a;a=this.wrapper.scrollTop+
this.wrapper.offsetHeight<this.wrapper.scrollHeight?Math.ceil(this.ratio*this.wrapper.scrollTop):this.track.offsetHeight-this.handle.offsetHeight;this.handle.style.top=a+"px"},_addListener:function(a,b,d){var c=this._events;c||(this._events=c={});c[b]||(c[b]=[]);c[b].push({element:a,handler:d});p.apply(null,arguments)},_removeListener:function(a,b,d){var c=this._events[b],e,f;e=0;for(f=c.length;e<f;e++)if(c[e].handler===d){c.splice(e,1);m.apply(null,arguments);break}},_removeAllListeners:function(){var a=
this._events,b,d,c,e;for(b in a)for(d=a[b],c=0,e=d.length;c<e;c++)m(d[c].element,b,d[c].handler);delete this._events}});return h});
